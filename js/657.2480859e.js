"use strict";(self["webpackChunkweek6_homework_formal"]=self["webpackChunkweek6_homework_formal"]||[]).push([[657],{6571:function(t,i,e){function n(t){return{all:t=t||new Map,on:function(i,e){var n=t.get(i);n?n.push(e):t.set(i,[e])},off:function(i,e){var n=t.get(i);n&&(e?n.splice(n.indexOf(e)>>>0,1):t.set(i,[]))},emit:function(i,e){var n=t.get(i);n&&n.slice().map((function(t){t(e)})),(n=t.get("*"))&&n.slice().map((function(t){t(i,e)}))}}}e.d(i,{Z:function(){return a}});const o=n();var a=o},657:function(t,i,e){e.r(i),e.d(i,{default:function(){return D}});var n=e(3396),o=e(7139);const a={class:"container"},s={class:"mt-4"},l={class:"table align-middle"},d=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"圖片"),(0,n._)("th",null,"商品名稱"),(0,n._)("th",null,"價格"),(0,n._)("th")])],-1),c={style:{width:"200px"}},r={key:0,class:"h5"},u={key:1},g={class:"h6"},p={class:"h5"},h={class:"btn-group btn-group-sm"},_=(0,n.Uk)(" 查看更多 "),v=["onClick","disabled"],b={key:0,class:"spinner-border spinner-border-sm"},k=(0,n.Uk)(" 加到購物車 ");function f(t,i,e,f,w,m){const y=(0,n.up)("VueLoading"),C=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(y,{active:w.isLoading},null,8,["active"]),(0,n._)("div",s,[(0,n._)("table",l,[d,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(w.products,(t=>((0,n.wg)(),(0,n.iD)("tr",{key:t.id},[(0,n._)("td",c,[(0,n._)("div",{style:(0,o.j5)([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${t.imageUrl})`}])},null,4)]),(0,n._)("td",null,(0,o.zw)(t.title),1),(0,n._)("td",null,[t.price===t.origin_price?((0,n.wg)(),(0,n.iD)("div",r,(0,o.zw)(t.origin_price)+" 元 ",1)):((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("del",g,"原價 "+(0,o.zw)(t.origin_price)+" 元",1),(0,n._)("div",p,"現在只要 "+(0,o.zw)(t.price)+" 元",1)]))]),(0,n._)("td",null,[(0,n._)("div",h,[(0,n.Wm)(C,{to:`/product/${t.id}`,class:"btn btn-outline-secondary",disabled:w.loadingState===t.id},{default:(0,n.w5)((()=>[_])),_:2},1032,["to","disabled"]),(0,n._)("button",{type:"button",class:"btn btn-warning",onClick:i=>m.addToCart(t.id),disabled:w.loadingState===t.id},[w.loadingState===t.id?((0,n.wg)(),(0,n.iD)("span",b)):(0,n.kq)("",!0),k],8,v)])])])))),128))])])])])}var w=e(6571),m={data(){return{products:[],productId:"",loadingState:"",isLoading:!1}},methods:{getProducts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/steven1220/products/all").then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((t=>{console.log(t)}))},addToCart(t,i=1){const e={product_id:t,qty:i};this.loadingState=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/steven1220/cart",{data:e}).then((t=>{console.log(t),w.Z.emit("get-cart"),this.loadingState=""})).catch((t=>{console.log(t)}))}},mounted(){this.getProducts()}},y=e(89);const C=(0,y.Z)(m,[["render",f]]);var D=C}}]);
//# sourceMappingURL=657.2480859e.js.map