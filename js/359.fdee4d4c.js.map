{"version":3,"file":"js/359.fdee4d4c.js","mappings":"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","sources":["webpack://week6-homework-formal/../src/index.ts","webpack://week6-homework-formal/./src/libraries/emitter.js","webpack://week6-homework-formal/./src/views/CartView.vue","webpack://week6-homework-formal/./src/views/CartView.vue?73a2"],"sourcesContent":["export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = unknown> = (event: T) => void;\nexport type WildcardHandler<T = Record<string, unknown>> = (\n\ttype: keyof T,\n\tevent: T[keyof T]\n) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList<T = unknown> = Array<Handler<T>>;\nexport type WildCardEventHandlerList<T = Record<string, unknown>> = Array<WildcardHandler<T>>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap<Events extends Record<EventType, unknown>> = Map<\n\tkeyof Events | '*',\n\tEventHandlerList<Events[keyof Events]> | WildCardEventHandlerList<Events>\n>;\n\nexport interface Emitter<Events extends Record<EventType, unknown>> {\n\tall: EventHandlerMap<Events>;\n\n\ton<Key extends keyof Events>(type: Key, handler: Handler<Events[Key]>): void;\n\ton(type: '*', handler: WildcardHandler<Events>): void;\n\n\toff<Key extends keyof Events>(type: Key, handler?: Handler<Events[Key]>): void;\n\toff(type: '*', handler: WildcardHandler<Events>): void;\n\n\temit<Key extends keyof Events>(type: Key, event: Events[Key]): void;\n\temit<Key extends keyof Events>(type: undefined extends Events[Key] ? Key : never): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt<Events extends Record<EventType, unknown>>(\n\tall?: EventHandlerMap<Events>\n): Emitter<Events> {\n\ttype GenericEventHandler =\n\t\t| Handler<Events[keyof Events]>\n\t\t| WildcardHandler<Events>;\n\tall = all || new Map();\n\n\treturn {\n\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `'*'` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<Key extends keyof Events>(type: Key, handler: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.push(handler);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tall!.set(type, [handler] as EventHandlerList<Events[keyof Events]>);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * If `handler` is omitted, all handlers of the given type are removed.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from, or `'*'`\n\t\t * @param {Function} [handler] Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<Key extends keyof Events>(type: Key, handler?: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\tif (handler) {\n\t\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tall!.set(type, []);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `'*'` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing '*' handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<Key extends keyof Events>(type: Key, evt?: Events[Key]) {\n\t\t\tlet handlers = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as EventHandlerList<Events[keyof Events]>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(evt!);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\thandlers = all!.get('*');\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as WildCardEventHandlerList<Events>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(type, evt!);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n}\n","import mitt from \"mitt\";\n\nconst emitter = mitt();\nexport default emitter;\n","<template>\n  <div class=\"container\">\n    <VueLoading :active=\"isLoading\"></VueLoading>\n    <div class=\"text-end\">\n      <button\n        class=\"btn btn-outline-danger\"\n        type=\"button\"\n        @click=\"deleteAllCartItem\"\n        :disabled=\"cartData.carts.length === 0\"\n      >\n        清空購物車\n      </button>\n    </div>\n    <!-- <div> 測試用\n                    {{ cartData }}\n                </div> -->\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th></th>\n          <th>品名</th>\n          <th style=\"width: 150px\">數量/單位</th>\n          <th>單價</th>\n        </tr>\n      </thead>\n      <tbody>\n        <!-- 加入 v-if -->\n        <template v-if=\"cartData.carts\">\n          <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n            <td>\n              <!-- 刪除特定購物車產品按鈕 -->\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger btn-sm\"\n                :disabled=\"loadingState === item.id\"\n                @click=\"removeCartItem(item.id)\"\n              >\n                x\n              </button>\n            </td>\n            <td>\n              {{ item.product.title }}\n              <!-- <div class=\"text-success\" v-if=\"item.coupon\">\n                                        已套用優惠券\n                                    </div> -->\n            </td>\n            <td>\n              <div class=\"input-group input-group-sm\">\n                <div class=\"input-group mb-3\">\n                  <input\n                    min=\"1\"\n                    type=\"number\"\n                    class=\"form-control\"\n                    v-model.number=\"item.qty\"\n                    :disabled=\"loadingState === item.id\"\n                    @change=\"updateCartNumber(item)\"\n                  />\n\n                  <span class=\"input-group-text\" id=\"basic-addon2\">{{\n                    item.product.unit\n                  }}</span>\n                </div>\n              </div>\n            </td>\n            <td class=\"text-end\">\n              <small class=\"text-success\" v-if=\"item.final_total !== item.total\"\n                >折扣價：</small\n              >\n              {{ item.product.price }}\n            </td>\n          </tr>\n        </template>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td colspan=\"3\" class=\"text-end\">總計</td>\n          <td class=\"text-end\">{{ cartData.total }}</td>\n        </tr>\n        <tr v-if=\"cartData.final_total !== cartData.total\">\n          <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n          <td class=\"text-end text-success\">\n            {{ cartData.final_total }}\n          </td>\n        </tr>\n      </tfoot>\n    </table>\n\n    <!-- 訂單資訊 -->\n    <div class=\"my-5 row justify-content-center\">\n      <VForm ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\">\n        <div class=\"mb-3\">\n          <label for=\"email\" class=\"form-label\">Email</label>\n          <VField\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            class=\"form-control\"\n            rules=\"email|required\"\n            :class=\"{ 'is-invalid': errors['email'] }\"\n            placeholder=\"請輸入 Email\"\n            v-model=\"form.user.email\"\n          ></VField>\n          <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\n          <VField\n            id=\"name\"\n            name=\"姓名\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\n            placeholder=\"請輸入姓名\"\n            rules=\"required\"\n            v-model=\"form.user.name\"\n          ></VField>\n          <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\n          <VField\n            id=\"tel\"\n            name=\"電話\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['電話'] }\"\n            placeholder=\"請輸入電話\"\n            rules=\"min:8|max:10|required\"\n            v-model=\"form.user.tel\"\n          ></VField>\n          <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\n          <VField\n            id=\"address\"\n            name=\"地址\"\n            type=\"text\"\n            class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['地址'] }\"\n            placeholder=\"請輸入地址\"\n            rules=\"required\"\n            v-model=\"form.user.address\"\n          ></VField>\n          <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n        </div>\n\n        <div class=\"mb-3\">\n          <label for=\"message\" class=\"form-label\">留言</label>\n          <textarea\n            id=\"message\"\n            class=\"form-control\"\n            cols=\"30\"\n            rows=\"10\"\n            v-model=\"form.message\"\n          ></textarea>\n        </div>\n        <div class=\"text-end\">\n          <!-- 驗證沒過時或是購物車中沒產品時，無法 click -->\n          <button\n            type=\"submit\"\n            class=\"btn btn-danger\"\n            :disabled=\"\n              Object.keys(errors).length > 0 || cartData.carts.length === 0\n            \"\n            @click.prevent=\"sendOrder\"\n          >\n            送出訂單\n          </button>\n        </div>\n      </VForm>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from \"@/libraries/emitter\";\nexport default {\n  data() {\n    return {\n      cartData: {\n        carts: [],\n      },\n      loadingState: \"\",\n      isLoading: false,\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\",\n        },\n        message: \"\",\n      },\n    };\n  },\n\n  methods: {\n    // 取得購物車列表\n    getCartList() {\n      this.isLoading = true;\n      this.$http\n        .get(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          // console.log(res);\n          this.cartData = res.data.data;\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    // 刪除特定購物車產品\n    removeCartItem(id) {\n      this.loadingState = id;\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`,\n        )\n        .then(() => {\n          // console.log(res);\n          // 再取得購物車列表\n          this.getCartList();\n          this.loadingState = \"\";\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    //清空全部購物車產品\n    deleteAllCartItem() {\n      this.isLoading = true;\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`,\n        )\n        .then(() => {\n          // console.log(res);\n          // 再取得購物車列表\n          this.getCartList();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    //變更購物車數量\n    updateCartNumber(item) {\n      // 判斷是否為 0 或是負數\n      if (item.qty == 0 || item.qty < 0) {\n        alert(\"數量至少為1個\");\n        this.getCartList();\n        return;\n      }\n      const data = {\n        product_id: item.id,\n        qty: item.qty,\n      };\n      this.loadingState = item.id;\n      this.$http\n        .put(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`,\n          { data },\n        )\n        .then(() => {\n          // console.log(res);\n          // 再取得購物車列表\n          this.getCartList();\n          // 清空讀取狀態\n          this.loadingState = \"\";\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    //送出訂單\n    sendOrder() {\n      const order = this.form;\n      console.log(order);\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`,\n          { data: order },\n        )\n        .then((res) => {\n          // console.log(res);\n          alert(res.data.message);\n          this.$refs.form.resetForm();\n          this.form.message = \"\";\n          // 再取得購物車列表\n          this.getCartList();\n          emitter.emit(\"get-cart\");\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n\n  mounted() {\n    this.getCartList();\n  },\n};\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=db482988\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Steven\\\\Desktop\\\\2022_Vue_Task_Week6\\\\week6-homework-formal\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["all","Map","on","type","handler","handlers","get","push","set","off","splice","indexOf","emit","evt","slice","map","emitter","mitt","class","_createElementVNode","style","id","colspan","for","_createElementBlock","_createVNode","_component_VueLoading","active","$data","onClick","$options","disabled","carts","length","_hoisted_3","_hoisted_5","_Fragment","key","_renderList","item","_hoisted_6","_toDisplayString","product","title","min","qty","$event","onChange","unit","final_total","total","price","_hoisted_13","_hoisted_15","_hoisted_16","_component_VForm","ref","errors","_hoisted_20","_component_VField","name","rules","placeholder","user","email","_component_ErrorMessage","_hoisted_22","_hoisted_24","tel","_hoisted_26","address","_hoisted_28","cols","rows","message","Object","keys","_hoisted_30","data","cartData","loadingState","isLoading","form","methods","getCartList","this","$http","then","res","catch","err","console","log","removeCartItem","delete","deleteAllCartItem","updateCartNumber","alert","product_id","put","sendOrder","order","post","$refs","resetForm","mounted","__exports__","render"],"sourceRoot":""}