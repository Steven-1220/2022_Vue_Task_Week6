{"version":3,"file":"js/534.a82b7f6d.js","mappings":"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","sources":["webpack://week6-homework-formal/../src/index.ts","webpack://week6-homework-formal/./src/libraries/emitter.js","webpack://week6-homework-formal/./src/views/ProductView.vue","webpack://week6-homework-formal/./src/views/ProductView.vue?f743"],"sourcesContent":["export type EventType = string | symbol;\n\n// An event handler can take an optional event argument\n// and should not return a value\nexport type Handler<T = unknown> = (event: T) => void;\nexport type WildcardHandler<T = Record<string, unknown>> = (\n\ttype: keyof T,\n\tevent: T[keyof T]\n) => void;\n\n// An array of all currently registered event handlers for a type\nexport type EventHandlerList<T = unknown> = Array<Handler<T>>;\nexport type WildCardEventHandlerList<T = Record<string, unknown>> = Array<WildcardHandler<T>>;\n\n// A map of event types and their corresponding event handlers.\nexport type EventHandlerMap<Events extends Record<EventType, unknown>> = Map<\n\tkeyof Events | '*',\n\tEventHandlerList<Events[keyof Events]> | WildCardEventHandlerList<Events>\n>;\n\nexport interface Emitter<Events extends Record<EventType, unknown>> {\n\tall: EventHandlerMap<Events>;\n\n\ton<Key extends keyof Events>(type: Key, handler: Handler<Events[Key]>): void;\n\ton(type: '*', handler: WildcardHandler<Events>): void;\n\n\toff<Key extends keyof Events>(type: Key, handler?: Handler<Events[Key]>): void;\n\toff(type: '*', handler: WildcardHandler<Events>): void;\n\n\temit<Key extends keyof Events>(type: Key, event: Events[Key]): void;\n\temit<Key extends keyof Events>(type: undefined extends Events[Key] ? Key : never): void;\n}\n\n/**\n * Mitt: Tiny (~200b) functional event emitter / pubsub.\n * @name mitt\n * @returns {Mitt}\n */\nexport default function mitt<Events extends Record<EventType, unknown>>(\n\tall?: EventHandlerMap<Events>\n): Emitter<Events> {\n\ttype GenericEventHandler =\n\t\t| Handler<Events[keyof Events]>\n\t\t| WildcardHandler<Events>;\n\tall = all || new Map();\n\n\treturn {\n\n\t\t/**\n\t\t * A Map of event names to registered handler functions.\n\t\t */\n\t\tall,\n\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t * @param {string|symbol} type Type of event to listen for, or `'*'` for all events\n\t\t * @param {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton<Key extends keyof Events>(type: Key, handler: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\thandlers.push(handler);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tall!.set(type, [handler] as EventHandlerList<Events[keyof Events]>);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t * If `handler` is omitted, all handlers of the given type are removed.\n\t\t * @param {string|symbol} type Type of event to unregister `handler` from, or `'*'`\n\t\t * @param {Function} [handler] Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff<Key extends keyof Events>(type: Key, handler?: GenericEventHandler) {\n\t\t\tconst handlers: Array<GenericEventHandler> | undefined = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\tif (handler) {\n\t\t\t\t\thandlers.splice(handlers.indexOf(handler) >>> 0, 1);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tall!.set(type, []);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `'*'` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * Note: Manually firing '*' handlers is not supported.\n\t\t *\n\t\t * @param {string|symbol} type The event type to invoke\n\t\t * @param {Any} [evt] Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit<Key extends keyof Events>(type: Key, evt?: Events[Key]) {\n\t\t\tlet handlers = all!.get(type);\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as EventHandlerList<Events[keyof Events]>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(evt!);\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\thandlers = all!.get('*');\n\t\t\tif (handlers) {\n\t\t\t\t(handlers as WildCardEventHandlerList<Events>)\n\t\t\t\t\t.slice()\n\t\t\t\t\t.map((handler) => {\n\t\t\t\t\t\thandler(type, evt!);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n}\n","import mitt from \"mitt\";\n\nconst emitter = mitt();\nexport default emitter;\n","<template>\n  <h1>單一產品</h1>\n\n  <div class=\"modal-dialog modal-xl\" role=\"document\">\n    <div class=\"modal-content border-0\">\n      <div class=\"modal-header bg-dark text-white\">\n        <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n          <span>{{ product.title }}</span>\n        </h5>\n      </div>\n      <div class=\"modal-body\">\n        <div class=\"row\">\n          <div class=\"col-sm-6\">\n            <img class=\"img-fluid\" :src=\"product.imageUrl\" alt=\"\" />\n          </div>\n          <div class=\"col-sm-6\">\n            <span class=\"badge bg-primary rounded-pill\">{{\n              product.category\n            }}</span>\n            <p>商品描述：{{ product.description }}</p>\n            <p>商品內容：{{ product.content }}</p>\n            <div class=\"h5\" v-if=\"product.price == product.origin_price\">\n              {{ product.origin_price }} 元\n            </div>\n            <div v-else>\n              <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n              <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n            </div>\n\n            <div class=\"input-group mt-auto\">\n              <input\n                type=\"number\"\n                class=\"form-control\"\n                min=\"1\"\n                v-model=\"quantity\"\n              />\n              <button\n                type=\"button\"\n                class=\"btn btn-primary\"\n                @click=\"addToCart(product.id)\"\n              >\n                加入購物車\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from \"@/libraries/emitter\";\nexport default {\n  data() {\n    return {\n      product: {},\n      quantity: 1,\n    };\n  },\n  methods: {\n    // 取得特定產品資訊\n    getProductInfo() {\n      // $router -> 方法 ，$route -> 物件\n      // console.log(this.$route);\n      const id = this.$route.params.id;\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${id}`,\n        )\n        .then((res) => {\n          // console.log(res);\n          this.product = res.data.product;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    // 加入購物車\n    addToCart(id) {\n      const data = {\n        product_id: id,\n        qty: this.quantity,\n      };\n      this.loadingState = id;\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`,\n          { data },\n        )\n        .then(() => {\n          // console.log(res);\n          this.loadingState = \"\";\n          emitter.emit(\"get-cart\");\n          // 加入購物車後重置數量\n          setTimeout(() => {\n            this.quantity = 1;\n          }, 1000);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  mounted() {\n    this.getProductInfo();\n  },\n};\n</script>\n","import { render } from \"./ProductView.vue?vue&type=template&id=21ee098e\"\nimport script from \"./ProductView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Steven\\\\Desktop\\\\2022_Vue_Task_Week6\\\\week6-homework-formal\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["all","Map","on","type","handler","handlers","get","push","set","off","splice","indexOf","emit","evt","slice","map","emitter","mitt","_createElementVNode","class","role","id","_hoisted_1","_toDisplayString","$data","title","src","imageUrl","alt","category","description","content","price","origin_price","_createElementBlock","_hoisted_13","min","$event","onClick","$options","data","product","quantity","methods","getProductInfo","this","$route","params","$http","then","res","catch","err","console","log","addToCart","product_id","qty","loadingState","post","setTimeout","mounted","__exports__","render"],"sourceRoot":""}